---
export interface Props {
	id: string;
	title: string;
	question: string;
	explanation: string;
	type?: "radio" | "checkbox";
}

const {id, title, question, explanation, type} = Astro.props;
---

<div class='question' id={id} data-question-type={type}>
	<div class='question-header'>
		<h3>{title}</h3>
		<div class='question-controls'>
			<button type='button' class='flag-button' title='Marquer pour révision' data-question-id={id}>
				<svg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'>
					<path d='M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z'></path>
					<line x1='4' y1='22' x2='4' y2='15'></line>
				</svg>
			</button>
			<span class='question-number'>{id.substring(1)}</span>
		</div>
	</div>
	<p class='question-text'>{question}</p>
	{
		type === "checkbox" && (
			<p class='question-hint'>
				<strong>Note:</strong> Sélectionnez toutes les réponses qui s'appliquent (choix multiples)
			</p>
		)
	}
	<div class='options'>
		<slot />
	</div>
	<div class='explanation' id={`explain${id.substring(1)}`}>
		<div class='explanation-header'>
			<svg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'
				><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='16' x2='12' y2='12'></line><line x1='12' y1='8' x2='12.01' y2='8'></line></svg
			>
			<span>Explication</span>
		</div>
		<div class='explanation-content'>
			{explanation}
		</div>
	</div>
</div>
